openapi: 3.0.0
info:
  title: Schema Dependencies Test API
  version: 1.0.0
components:
  schemas:
    BaseModel:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
          format: date-time

    User:
      allOf:
        - $ref: '#/components/schemas/BaseModel'
        - type: object
          properties:
            name:
              type: string
            email:
              type: string
            address:
              $ref: '#/components/schemas/Address'

    Address:
      type: object
      properties:
        street:
          type: string
        city:
          type: string
        country:
          $ref: '#/components/schemas/Country'

    Country:
      type: object
      properties:
        code:
          type: string
        name:
          type: string

    Order:
      type: object
      properties:
        id:
          type: string
        user:
          $ref: '#/components/schemas/User'
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'

    OrderItem:
      type: object
      properties:
        product:
          $ref: '#/components/schemas/Product'
        quantity:
          type: integer

    Product:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        category:
          $ref: '#/components/schemas/Category'

    Category:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        parent:
          $ref: '#/components/schemas/Category'
